<html>
<head>
	<script data-joshfire-bootstrap src="http://localhost:40021/bootstrap/4ea19339444863e0cc000022/auto/auto/"></script>
	
	<link rel="stylesheet" href="preview.css">
</head>
<body>

<div id="preview">Loading...</div>

<script>

	Joshfire.config.datasources["main"].find({},function(err, data) {
		var str;
		if (!data.entries || !data.entries.length) {
			str = "No entries";
		} else {
			str = '<ul>';
			for (var i=0;i<data.entries.length;i++) {
				var element = data.entries[i];
				str += '<li>';

				if(element.title) {
					str += '<h4>' + element.title + '</h4>';
				}
				if(element.image) {
					str += '<p><img src="' + element.image + '" /></p>';
				}
				
				// in some case, display the 'text' field.
				if(element.source == 'twitter') {
					str += '<p>' + element.text + '</p>';
				}
				str += '</li>';
			}	
        	str += '</ul>';
		}
		document.getElementById("preview").innerHTML = str;
	});
    
</script>
</body>
</html>